<ion-content [fullscreen]="true" class="login-content">
  <div class="login-header">
    <img src="../../../assets/logo.png" alt="logo nutriTrack" class="logo" />
    <h1 class="title">nutritrack</h1>
    <p class="subtitle">Recupera el acceso a tu cuenta</p>
  </div>

  <div *ngIf="!requestSent">
    <form [formGroup]="requestForm" (ngSubmit)="onSubmit()" class="login-form">
      <div class="form-field">
        <ion-label class="input-label" position="stacked">Email</ion-label>
        <ion-item fill="outline" shape="round" lines="none" class="input-item">
          <ion-icon slot="start" name="mail-outline"></ion-icon>
          <ion-input
            formControlName="correo"
            type="email"
            placeholder="Introduce tu email..."
            inputmode="email"
            aria-label="Email">
          </ion-input>
        </ion-item>
        <ion-note *ngIf="requestForm.get('correo')?.invalid && requestForm.get('correo')?.touched" color="danger">
          Por favor, introduce una dirección de correo válida
        </ion-note>
      </div>

      <ion-button
        expand="block"
        class="login-button"
        type="submit"
        shape="round"
        [disabled]="requestForm.invalid || loading">
        Enviar instrucciones
        <ion-icon slot="end" name="send-outline"></ion-icon>
      </ion-button>
    </form>
  </div>

  <div *ngIf="requestSent" class="success-message">
    <ion-icon name="checkmark-circle-outline" color="success"></ion-icon>
    <h2>Solicitud enviada</h2>
    <p>Hemos enviado un correo electrónico con instrucciones para restablecer tu contraseña.</p>
    <p>Revisa tu bandeja de entrada y sigue las instrucciones del correo.</p>
  </div>

  <div class="back-link">
    <ion-button fill="clear" (click)="backToLogin()">
      <ion-icon slot="start" name="arrow-back-outline"></ion-icon>
      Volver a iniciar sesión
    </ion-button>
  </div>
</ion-content>